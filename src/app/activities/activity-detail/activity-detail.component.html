<div *ngIf="activity; else loading" class="card">
  <div class="card-header text-muted">By {{ activity.time_type }}</div>
  <div class="card-body">
    <div class="text-center">
      <h2 class="card-title">{{ activity.title }}</h2>
      <h6 class="card-subtitle mb-2 text-muted">{{ activity.subtitle }}</h6>
    </div>

    <p *ngIf="activity.details" class="card-text">{{ activity.details }}</p>

    <p>Duration: {{ activity.duration }}h</p>

    <ul class="list-group list-group-flush">
      <li class="list-group-item" *ngIf="activity.transfer_provided">Transfer is provided</li>
      <li class="list-group-item" *ngIf="activity.guide_provided">Guide is provided</li>
    </ul>

    <div>
      <div *ngIf="activity.prices.length >= 1; else noPrices">
        <div *ngIf="activity.prices.length === 1">
          Price: {{ activity.prices[0].amount | currency }}
          <span *ngIf="activity.prices[0].options"> ({{ activity.prices[0].options }})</span>
        </div>
        <div *ngIf="activity.prices.length > 1">
          <div *ngIf="activityIsInCart(); else activityIsNotInCart">
            Activity added with price category
            {{ this.activityFromCart.selectedPrice.amount | currency }}
            <span *ngIf="this.activityFromCart.selectedPrice.options"> ({{ this.activityFromCart.selectedPrice.options }})</span>
          </div>

          <ng-template #activityIsNotInCart>
            <p>Available prices (please select one):</p>

            <div *ngFor="let price of activity.prices; let idx = index" class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="priceRadio"
                id="{{ price.id }}"
                [value]="price.id"
                [checked]="idx === 0"
                (change)="onSelectionChange(price)">
              <label class="form-check-label" for="{{ price.id }}">
                {{ price.amount | currency }}
                <span *ngIf="price.options"> ({{ price.options }})</span>
              </label>
            </div>
          </ng-template>
        </div>

        <app-modify-cart-button
          [activity]="activity"
          [selectedPrice]="selectedPrice"
          *ngIf="canRequestQuotation()">
        </app-modify-cart-button>
      </div>
      <ng-template #noPrices>
        Coming soon
      </ng-template>
    </div>
  </div>
</div>

<ng-template #loading>
  <h2 class="text-center">Loading activity...</h2>
</ng-template>
